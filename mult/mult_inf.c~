/*
** EPITECH PROJECT, 2017
** mult_inf 
** File description:
** mult_inf for bistromatic 
*/

#include <stdlib.h>
#include <stdio.h>
#include "my.h"
#include "bistromatic.h"

char	*my_revstr(char *);
int	r_multinf(char *s1, char s2, char *tmp, int rest);

char	*multinf(char *s1, char *s2, char *tmp, int rest)
{
	int i = 0;
	char *result;
	char *stock;

	s1 = my_revstr(s1);
	s2 = my_revstr(s2);
	printf("s1: %s\n", s1);
	printf("s2: %s\n\n", s2);
	tmp = malloc(sizeof(char) * (my_strlen(s1) + my_strlen(s2) + 1)); 
	result = malloc(sizeof(char) * (my_strlen(s1) + my_strlen(s2) + 1)); 
	while (s2[i]) {
		printf("s2[i]: %c\n\n", s2[i]); 
		r_multinf(s1, s2[i], tmp + i, 0);
		addinf(result, tmp);
		//result = my_revstr(result);
		int j = 0;
		while (result[j]) {
			printf("%c", result[j] + 48);
			j++;
			}
		i += 1;
	}
	return (result); 
}

int	r_multinf(char *s1, char s2, char *tmp, int rest)
{
	int base_length = my_strlen(BASE);
	int n1 = (*s1 ? indexof(BASE, *s1) : 0);
	int n2 = s2 - 48;
	int res_mul = (n1 * n2) + rest; 
	int unit = res_mul % 10;
	int j = 0;

	if (!*s1 && !rest) {
		tmp++;
		*tmp = '\0';
	        printf("\n%s\n", "END -> RETURN");
		return (0);
	}
	if (*s1)
		s1++; 
	printf("n1: %d\n", n1); 
	rest = (res_mul / 10) % (10);
	*tmp = BASE[unit];
	printf("unit: %d\n", unit); 
	printf("%c\n", *tmp);
	return (r_multinf(s1, s2, ++tmp, rest)); 
}
